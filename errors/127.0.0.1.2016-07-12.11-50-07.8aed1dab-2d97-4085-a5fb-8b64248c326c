(dp1
S'output'
p2
S'<class \'_mysql_exceptions.OperationalError\'> (1054, "Unknown column \'puntaje.idUser\' in \'on clause\'")'
p3
sS'layer'
p4
S'D:\\web2py\\applications\\BC\\controllers/JugadorController.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n# intente algo como\nimport smtplib\n\n#get\ndef login(): \n    response.view = "JugadorController/login.html"\n    return dict(LError=\'\',LNom=\'\',LPsw=\'\')\n\n#post\ndef loginCompleto():\n\tform = request.post_vars\n\t\n\trow = db((db.usuario.nombre == form.LNom) & (db.usuario.password == form.LPsw)).select()\n\tif len(row)== 0:\n\t\tresponse.view = "JugadorController/login.html"\n\t\treturn dict(LNom=form.LNom,LPsw=form.LPsw,LError=\'Usuario no registrado / Ingreso mal sus datos\')\n\telse:\n\t\tresponse.view = "JugadorController/login.html"\n\t\tsession.id=row[0].id\n   \t\tsession.jugador=row[0].nombre\n   \t\treturn dict(LNom=form.LNom,LPsw=form.LPsw,LError=\'Bienvenido\')\n\ndef registro(): \n    response.view = "JugadorController/registro.html"\n    return dict(nombre=\'\',email=\'\',psw=\'\',Error=\'\',EError=\'\')\n\ndef registroCompleto():\n\tform = request.post_vars\n\tnick = db(db.usuario.nombre == form.Nom).select()\n\tcorr = db(db.usuario.correo == form.Eml).select()\n\tif (len(nick) == 0) and (len(corr) == 0):\n\t\tdb.usuario.insert(nombre=form.Nom,correo=form.Eml,password=form.Pas)\n\t\tresponse.view = "JugadorController/registro.html"\n   \t\tsession.jugador=form.Nom\n\t\treturn dict(nombre=\'\',email=\'\',psw=\'\',Error=\'Registro Exitoso!\',EError=\'\')\n\telif (len(corr) == 0):\n\t\tresponse.view = "JugadorController/registro.html"\n\t\treturn dict(nombre=form.Nom,email=form.Eml,psw=form.psw,Error=\'Nombre ya existe\',EError=\'\')\n\telif (len(nick) == 0):\n\t\tresponse.view = "JugadorController/registro.html"\n\t\treturn dict(nombre=form.Nom,email=form.Eml,psw=form.psw,Error=\'\',EError=\'Correo ya esta registrado\')\n\n\telse:\n\t\tresponse.view = "JugadorController/registro.html"\n\t\treturn dict(nombre=form.Nom,email=form.Eml,psw=form.psw,Error=\'El Nombre ya existe\',EError=\'el Correo ya esta registrado\')\t\n\n\ndef recuperar():\n\tresponse.view= "JugadorController/recuperar.html"\n\treturn dict(nombre=\'\',Error=\'\')\n\ndef mensaje():\n\tdatos = request.post_vars\n\trow = db(db.usuario.correo == datos.rEm).select()\n\tif len(row)==0:\n\t\tresponse.view= "JugadorController/recuperar.html"\n\t\treturn dict(nombre=\'\',Error=\'Correo Erroneo\')\n\telse:\n\t\tresponse.view= "JugadorController/login.html"\n\t\tusuario = dict(row=row)\n\t\tfor dato in row:\n\t\t\tcontra = dato.password\n\t\t\temail = dato.correo\n\t\tsender = \'projectonepm@gmail.com\'\n\t\tlogin = \'projectonepm@gmail.com:demos2016\'\n\t\tsend_test_to = email\n\t\tmail.settings.tls = True\n\t\tserver = \'{0}{1}{2}\'.format(\'smtp.\', \'gmail.com\', \':465\')\n\t\tmail.settings.server = server\n\t\tmail.settings.sender = sender\n\t\tmail.settings.login = login\n\t\tmail.send(to=[send_test_to],\n            subject=\'Recuperar Contrase\xc3\xb1a\',\n            \n            message=\'Su contrase\xc3\xb1a es: \' + contra)     \n\t\treturn dict(nombre=\'\',Error=\'\',LError=\'\',LNom=\'\',LPsw=\'\')\n\n\ndef registrarPuntaje():\n\tpuntaje= request.vars.puntaje\n\tdescJuego=request.vars.juego\n\tfecha_actual=request.vars.fecha\n\ttotaltiempo=request.vars.tiempo\n\tif session.id!=None:\n\t\trow=db.puntos.insert(idUser=session.id,descJuego=descJuego,puntaje=puntaje,tiempo=totaltiempo,fecha=fecha_actual)\n\t\n\treturn ()\n\n\ndef ranking():\n\n\trow_preg=db.executesql("SELECT usuario.nombre,SUM(puntaje) as \'puntaje\', SEC_TO_TIME(SUM(TIME_TO_SEC(tiempo))) FROM puntos INNER JOIN usuario ON puntaje.idUser=usuario.id WHERE descJuego=\'preguntas\' GROUP BY idUser ORDER by puntaje DESC")\n\trow_memoria=db.executesql("SELECT usuario.nombre,SUM(puntaje) as \'puntaje\' FROM puntos INNER JOIN usuario ON puntaje.idUser=usuario.id WHERE descJuego=\'memoria\' GROUP BY idUser ORDER by puntaje DESC")\n\t\n\treturn dict(preguntas=row_preg, memorias=row_memoria)\n\ndef perfil():\n\trow=db.executesql("SELECT nombre,correo FROM USUARIO WHERE id="+str(session.id))\n\treturn dict(usuario=row)\n\ndef cerrar():\n\tsession.jugador=None\n\tsession.id=None\n\tredirect(URL(\'HomeController\',\'index\'))\n\treturn dict()\nresponse._vars=response._caller(ranking)\n'
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "D:\\web2py\\gluon\\restricted.py", line 227, in restricted\n    exec ccode in environment\n  File "D:\\web2py\\applications\\BC\\controllers/JugadorController.py", line 107, in <module>\n  File "D:\\web2py\\gluon\\globals.py", line 417, in <lambda>\n    self._caller = lambda f: f()\n  File "D:\\web2py\\applications\\BC\\controllers/JugadorController.py", line 93, in ranking\n    row_preg=db.executesql("SELECT usuario.nombre,SUM(puntaje) as \'puntaje\', SEC_TO_TIME(SUM(TIME_TO_SEC(tiempo))) FROM puntos INNER JOIN usuario ON puntaje.idUser=usuario.id WHERE descJuego=\'preguntas\' GROUP BY idUser ORDER by puntaje DESC")\n  File "D:\\web2py\\gluon\\packages\\dal\\pydal\\base.py", line 1019, in executesql\n    adapter.execute(query)\n  File "D:\\web2py\\gluon\\packages\\dal\\pydal\\adapters\\base.py", line 1388, in execute\n    return self.log_execute(*a, **b)\n  File "D:\\web2py\\gluon\\packages\\dal\\pydal\\adapters\\base.py", line 1382, in log_execute\n    ret = self.get_cursor().execute(command, *a[1:], **b)\n  File "MySQLdb/cursors.py", line 205, in execute\n  File "MySQLdb/connections.py", line 36, in defaulterrorhandler\nOperationalError: (1054, "Unknown column \'puntaje.idUser\' in \'on clause\'")\n'
p11
s.